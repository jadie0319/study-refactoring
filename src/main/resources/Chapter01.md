# Chapter1 - 리팩터링: 첫 번째 예시

리팩터링을 시작하기 전에 테스트 코드를 작성하자
- 한 가지를 수정할 때마다 테스트하면, 오류가 생기더라도 살펴볼 범위가 좁아서 문제를 찾고 해결하기 쉽다

임시변수를 질의 함수로 바꾸기
- 임시변수들 때문에 로컬 범위에 존재하는 이름이 늘어나서 추출 작업이 복잡해짐
  - 임시 변수를 질의 함수로 바꾸기, 함수 추출
  - 변수 인라인
  - 함수 선언 바꾸기 (매개변수 삭제)
- 지역변수 제거의 장점은 추출 작업이 쉬워진다는 것이다.

volumeCredits 케이스
- 반복문 쪼개기
  - 반복문 속 누적 로직을 별도 for 문으로 분리
  - 반복문이 늘어나니 성능 이슈가 있다?
  - 특별한 경우를 제외하곤 반복문 쪼개기로 인한 성능 저하 효과는 미미하다.
- 문장슬라이드
    - 변수 선언부를 반복문 바로 앞으로 옮긴다.
- 함수 추출하기
  - 계산 로직을 별도 함수로 추출
- 변수 인라인하기
  - volumeCredits 변수를 제거

상황이 복잡해지면 단계를 더 작게 나누는 일을 우선으로 하자.
- 쉽게 찾고 쉽게 해결 가능
- 작업속도가 빨라진다

다형성
- 상속 계층을 구성해 서브 클래스가 각자의 구현 로직을 정의하게 한다
- 조건부 로직을 다형성으로 바꾸기
  - 조건부 코드 한 덩어리를 다형성을 활용하는 방식으로 변경
  - 생성자를 팩터리 함수로 바꾸면 조건부 로직을 다형성으로 바꾸기 기법을 적용하기 수월해진다?


## 핵심

- 좋은 코드를 가늠하는 확실한 방법은 '얼마나 수정하기 쉬운가' 이다. 
- 리팩터링을 효과적으로 하는 핵심
  - 단계를 잘게 나누고 매번 컴파일, 테스트하여 작동하는 상태를 유지 
  - 단계를 잘게 나눠야 더 빠르게 처리 가능하고
  - 코드는 절대 깨지지 않으며
  - 작은 단계들이 모여서 상당히 큰 변화를 이룰 수 있다는 사실을 깨닫는 것
